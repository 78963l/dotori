{{define "itemsTopUsing"}}
{{$thumbnailwidth := .Adminsetting.ThumbnailImageWidth}}
{{$thumbnailheight := .Adminsetting.ThumbnailImageHeight}}
<div class="row justify-content-center align-items-center m-3">
    <div class="col-lg-12">
        <div class="input-group mb-3">
            <span class="text-white">가장 많이 사용되는 에셋 {{ItemListLength $.TopUsingItems}}건</span><br>
        </div>
    </div>
</div>
<div class="row justify-content-center align-items-center m-3">
    <div class="col-lg-12">
        <div class="input-group mb-3" style="display: inline-block; width: 98%; text-align: right;">
            <a href="#topUsingCarousel" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a href="#topUsingCarousel" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
</div>
<div class="container-fluid">
    <div id="topUsingCarousel" class="carousel slide" data-interval="false">
    <div class="carousel-inner" role="listbox">
            {{range $i, $q := .TopUsingItems}}
                {{$value := mod $i 4}}
                {{if and (eq $value 0) (eq $i 0)}}
                <div class="carousel-item row no-gutters active">
                    <div class="row mx-auto mb-12">
                {{else if eq $value 0}}
                <div class="carousel-item row no-gutters">
                    <div class="row mx-auto mb-12">
                {{end}}
                    <div class="col-sm-3 text-center">
                        <div class="panel-thumbnail">
                            <a href="#" title="image {{$i}}" class="thumb">
                            {{if eq .ItemType "pdf"}}
                                <img width="{{$thumbnailwidth}}" height="{{$thumbnailheight}}" src="/assets/img/pdfthumbnail.svg">
                            {{else if eq .ItemType "hwp"}}
                                <img width="{{$thumbnailwidth}}" height="{{$thumbnailheight}}" src="/assets/img/hwpthumbnail.svg">
                            {{else if eq .ItemType "sound"}}
                                <img width="{{$thumbnailwidth}}" height="{{$thumbnailheight}}" src="/assets/img/soundthumbnail.svg">
                            {{else if eq .ItemType "hdri" "texture" }}
                                <img width="{{$thumbnailwidth}}" height="{{$thumbnailheight}}" src="{{if eq .Status "done" }}/mediadata?id={{.ID.Hex}}&type=png{{else}}/assets/img/noimage.svg{{end}}">
                            {{else}}
                                <video width="{{$thumbnailwidth}}" height="{{$thumbnailheight}}" controls poster="{{if eq .Status "done" }}/mediadata?id={{.ID.Hex}}&type=png{{else}}/assets/img/noimage.svg{{end}}">
                                    <source src="/mediadata?id={{.ID.Hex}}&type=mp4" type="video/mp4">
                                    <source src="/mediadata?id={{.ID.Hex}}&type=ogg" type="video/ogg">
                                    Your browser does not support the video tag.
                                </video>
                            {{end}}
                            </a>    
                        </div>
                        <div class="info mb-3">
                                <div>
                                    <span class="text-muted">Title: {{.Title}}</span><br>
                                    <span class="text-muted">Author: {{.Author}}</span><br>
                                    <span class="text-muted">UsingRate: {{ .UsingRate}}</span><br>
                                </div>  
                        </div>
                    </div>
                {{if eq $value 3}}
                    </div>
                </div>
                {{end}}
            {{end}}
                </div>
            </div>
        </div>
    </div>
</div>
{{end}}